;/*FB_PKG_DELIM*/

__d("Comet360GyroOverlay.react",["fbt","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isVisible;var c;b[0]!==a?(c={0:{className:"xy75621 xtzzx4i x47corl x10l6tqk xwa60dl x11lhmoz xippbsu x19991ni xl405pv xni59qk"},1:{className:"xy75621 xtzzx4i x47corl x10l6tqk xwa60dl x11lhmoz xippbsu x19991ni xl405pv xni59qk xg01cxk"}}[!!!a<<0],b[0]=a,b[1]=c):c=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsxs("div",babelHelpers["extends"]({className:"xatbrnm x14yjl9h xudhj91 x18nykt9 xww2gxu xy75621 x1n2onr6 xni59qk"},{children:[j.jsxs("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk x1xwhoib xgjxtca xnuwv8w x1lqxvo2 xgi2ibe x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi xamhcws xol2nv xlxy82 x19p7ews xng8ra xit27t2 x10l6tqk xndqk7f x7p49u4 x1247r65"},{children:[j.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk x3zwtg x1esw782 xgjxtca xnuwv8w x1lqxvo2 xgi2ibe x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv xwa7hi xtzzx4i x10l6tqk xuuh30 xnhpnai"}),j.jsx("div",{className:"x1x1c4bx x1c74tu6 xa4qsjk xxoll9x x1ahlmzr xgjxtca xnuwv8w x1lqxvo2 xgi2ibe x14yjl9h xudhj91 x18nykt9 xww2gxu x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv x10c73hc x10l6tqk xwa60dl x1cb1t30 x1u78mur"})]})),j.jsx("div",babelHelpers["extends"]({className:"x1x1c4bx x1c74tu6 xa4qsjk xi294cv x1esw782 x14yjl9h xudhj91 x18nykt9 xww2gxu xng8ra xtzzx4i x6ikm8r x10wlt62 x10l6tqk x1atx4j1 xuuh30 xuxw1ft xnhpnai"},{children:j.jsx("span",babelHelpers["extends"]({className:"x14ctfv x1f6kntn xng8ra xtzzx4i x1wus3qs x10l6tqk x2b8uid xuuh30 xnhpnai"},{children:h._(/*BTDS*/"360")}))}))]})),b[2]=a):a=b[2];b[3]!==c?(a=j.jsx("div",babelHelpers["extends"]({},c,{children:a})),b[3]=c,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("CometWebGLCubemapTexture",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a,this.$2=a.createTexture(),this.initializeTexture()}var b=a.prototype;b.initializeTexture=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);var b=new Uint8Array([0,0,0,0]);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};b.setFace=function(a,b){var d=this.$1,e=0;switch(a){case 0:e=d.TEXTURE_CUBE_MAP_POSITIVE_X;break;case 1:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Z;break;case 2:e=d.TEXTURE_CUBE_MAP_NEGATIVE_X;break;case 3:e=d.TEXTURE_CUBE_MAP_POSITIVE_Z;break;case 4:e=d.TEXTURE_CUBE_MAP_POSITIVE_Y;break;case 5:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Y;break;default:c("recoverableViolation")("Cubemap face out of bounds","webgl");return}e!==0&&(d.bindTexture(d.TEXTURE_CUBE_MAP,this.$2),d.texImage2D(e,0,d.RGB,d.RGB,d.UNSIGNED_BYTE,b),d.bindTexture(d.TEXTURE_CUBE_MAP,null))};b.generateMipmap=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.generateMipmap(a.TEXTURE_CUBE_MAP);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_CUBE_MAP,this.$2)};b.release=function(){this.$1.deleteTexture(this.$2)};return a}();g["default"]=a}),98);
__d("CometWebGLIndexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$1);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToElements=function(){var a=this.$2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$1)};return a}();f["default"]=a}),66);
__d("CometWebGLVertexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ARRAY_BUFFER,this.$1);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToAttribute=function(a,b,c,d,e,f){var g=this.$2;g.bindBuffer(g.ARRAY_BUFFER,this.$1);g.vertexAttribPointer(a,b,c,d,e,f);g.enableVertexAttribArray(a)};return a}();f["default"]=a}),66);
__d("getWebGLAttributeSizeAndType",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b?WebGLRenderingContext.UNSIGNED_BYTE:WebGLRenderingContext.FLOAT;switch(a.type){case WebGLRenderingContext.FLOAT:return{size:1,type:b};case WebGLRenderingContext.FLOAT_VEC2:return{size:2,type:b};case WebGLRenderingContext.FLOAT_VEC3:return{size:3,type:b};case WebGLRenderingContext.FLOAT_VEC4:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT2:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT3:return{size:9,type:b};case WebGLRenderingContext.FLOAT_MAT4:return{size:16,type:b}}return{size:1,type:b}}f["default"]=a}),66);
__d("CometWebGLGeometry",["CometWebGLIndexBuffer","CometWebGLVertexBuffer","getWebGLAttributeSizeAndType","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case WebGLRenderingContext.BYTE:case WebGLRenderingContext.UNSIGNED_BYTE:return 1;case WebGLRenderingContext.SHORT:case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.FLOAT:return 4}c("recoverableViolation")("Unrecognized vertex type: "+a,"webgl");return 1}a=function(){function a(a,b){b===void 0&&(b={interleaved:!0}),this.$1=[],this.$2=new(c("CometWebGLVertexBuffer"))(a),this.$3=null,this.$4=0,this.$6=null,this.$7=null,this.$8=0,this.$9=b.interleaved!==!1,this.$5=a,this.$10=0}var b=a.prototype;b.addAttribute=function(a,b){b===void 0&&(b={normalize:!1});if(!this.$9&&b.offset==null)throw c("unrecoverableViolation")("Vertex Buffer is not interleaved but attribute was added without an offset","immersive_media");var d=!!b.normalize,e=c("getWebGLAttributeSizeAndType")(a,d),f=e.size;e=e.type;var g=h(e);this.$1.push({loc:a.location,normalize:d,offset:b.offset!=null?b.offset:this.$10,size:f,stride:b.stride!=null?b.stride:g*f,type:e});this.$10+=g*f};b.bufferData=function(a){if(a instanceof ArrayBuffer){this.$2.bufferData(a);this.$4=a.byteLength;return}if(this.$3&&a.length<=this.$3.length){for(var b=0;b<a.length;b++)this.$3[b]=a[b];for(b=a.length;b<this.$3.length;b++)this.$3[b]=0}else this.$3=new Float32Array(a);this.$4=a.length*4;this.$2.bufferData(this.$3.buffer)};b.bufferIndex=function(a){if(this.$7&&a.length<this.$7.length){for(var b=0;b<a.length;b++)this.$7[b]=a[b];for(b=a.length;b<this.$7.length;b++)this.$7[b]=0}else this.$7=new Uint16Array(a);this.$8=a.length;this.$6||(this.$6=new(c("CometWebGLIndexBuffer"))(this.$5));this.$6.bufferData(this.$7)};b.bindToAttributes=function(){for(var a=0;a<this.$1.length;a++){var b=this.$1[a];this.$2.bindToAttribute(b.loc,b.size,b.type,!!b.normalize,this.$9?this.$10:b.stride,b.offset)}this.$6&&this.$6.bindToElements()};b.draw=function(){if(this.$9&&this.$4%this.$10!==0){c("recoverableViolation")("Geometry buffer length is not perfectly divisible by stride","webgl");return}var a=this.$5;if(this.$7)a.drawElements(a.TRIANGLES,this.$8,a.UNSIGNED_SHORT,0);else{var b=this.$4/this.$10;a.drawArrays(a.TRIANGLES,0,b)}};return a}();g["default"]=a}),98);
__d("CometWebGLTexture",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c;b===void 0&&(b=Object.freeze({}));this.$1=a;this.$5=a.createTexture();this.$2=(c=b.generateMipmaps)!=null?c:!1;a.bindTexture(a.TEXTURE_2D,this.$5);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);this.$6=(c=b.width)!=null?c:0;this.$3=(c=b.height)!=null?c:0;if("source"in b){c=b.source;c==null?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.$6,this.$3,0,a.RGBA,a.UNSIGNED_BYTE,c):this.setSource(c)}else a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))}var b=a.prototype;b.getGLTexture=function(){return this.$5};b.setSource=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c=!1);this.$4=a;var d=this.$1;d.bindTexture(d.TEXTURE_2D,this.$5);a instanceof Image?(d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,b?1:0),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c?1:0),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a),this.$6=a.naturalWidth,this.$3=a.naturalHeight):a instanceof HTMLCanvasElement&&(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a),this.$6=a.width,this.$3=a.height);this.$2&&(d.generateMipmap(d.TEXTURE_2D),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_LINEAR));d.bindTexture(d.TEXTURE_2D,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_2D,this.$5)};return a}();f["default"]=a}),66);
__d("CometWebGLMesh",["CometWebGLCubemapTexture","CometWebGLGeometry","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){d===void 0&&(d={interleaved:!0}),this.$1=a,this.geometry=new(c("CometWebGLGeometry"))(a,{interleaved:d.interleaved!==!1}),this.program=b,this.renderOrder=1,this.uniforms={},this.visible=!0}var b=a.prototype;b.addAttribute=function(a,b){a=this.program.getAttribute(a);if(a==null)return this;this.geometry.addAttribute(a,b);return this};b.setUniform=function(a,b){this.uniforms[a]=b};b.getUniform=function(a){return this.uniforms[a]};b.unsetUniform=function(a){delete this.uniforms[a]};b.bufferData=function(a){this.geometry.bufferData(a)};b.bufferIndex=function(a){this.geometry.bufferIndex(a)};b.setVisible=function(a){this.visible=a};b.draw=function(){if(!this.visible)return;var a=0,b=this.program,d=b.getUniforms();for(d in d){var e=null;d in this.uniforms?e=this.uniforms[d]:e=b.getDefaultValueForUniform(d);var f=b.getUniform(d);if(f==null)throw c("unrecoverableViolation")("Specified uniform does not exist in program: "+d,"immersive_media");typeof e==="number"?f.set(e):Array.isArray(e)||e instanceof Float32Array?f.set(e):(e instanceof c("CometWebGLTexture")||e instanceof c("CometWebGLCubemapTexture"))&&(e.bindToSlot(a),f.set(a),a++)}this.geometry.bindToAttributes();this.geometry.draw()};return a}();g["default"]=a}),98);
__d("defaultValueForWebGLUniform",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case WebGLRenderingContext.FLOAT:return 0;case WebGLRenderingContext.FLOAT_VEC2:return[0,0];case WebGLRenderingContext.FLOAT_VEC3:return[0,0,0];case WebGLRenderingContext.FLOAT_VEC4:return[0,0,0,0];case WebGLRenderingContext.INT:return 0;case WebGLRenderingContext.INT_VEC2:return[0,0];case WebGLRenderingContext.INT_VEC3:return[0,0,0];case WebGLRenderingContext.INT_VEC4:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT2:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT3:return[0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.FLOAT_MAT4:return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.SAMPLER_2D:return null;default:return null}}f["default"]=a}),66);
__d("extractAttributesFromWebGLProgram",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d={},e=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES);for(var f=0;f<e;f++){var g=a.getActiveAttrib(b,f);if(!g){c("recoverableViolation")("Attempted to retrieve an attribute that did not exist","webgl");continue}var h=a.getAttribLocation(b,g.name);d[g.name]={location:h,size:g.size,type:g.type}}return d}g["default"]=a}),98);
__d("createWebGLUniformSetter",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){switch(d){case a.FLOAT:return a.uniform1f.bind(a,b);case a.FLOAT_VEC2:return a.uniform2fv.bind(a,b);case a.FLOAT_VEC3:return a.uniform3fv.bind(a,b);case a.FLOAT_VEC4:return a.uniform4fv.bind(a,b);case a.INT:return a.uniform1i.bind(a,b);case a.INT_VEC2:return a.uniform2iv.bind(a,b);case a.INT_VEC3:return a.uniform3iv.bind(a,b);case a.INT_VEC4:return a.uniform4iv.bind(a,b);case a.FLOAT_MAT2:return a.uniformMatrix2fv.bind(a,b,!1);case a.FLOAT_MAT3:return a.uniformMatrix3fv.bind(a,b,!1);case a.FLOAT_MAT4:return a.uniformMatrix4fv.bind(a,b,!1);case a.SAMPLER_2D:return a.uniform1i.bind(a,b);case a.SAMPLER_CUBE:return a.uniform1i.bind(a,b);default:return function(){c("recoverableViolation")("This uniform type is not supported: "+d,"webgl")}}}g["default"]=a}),98);
__d("extractUniformsFromWebGLProgram",["createWebGLUniformSetter","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d={},e=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var f=0;f<e;f++){var g=a.getActiveUniform(b,f);if(!g){c("recoverableViolation")("Attempted to retrieve a uniform that did not exist","webgl");continue}var h=a.getUniformLocation(b,g.name);d[g.name]={location:h,set:c("createWebGLUniformSetter")(a,h,g.type),size:g.size,type:g.type}}return d}g["default"]=a}),98);
__d("CometWebGLProgram",["defaultValueForWebGLUniform","extractAttributesFromWebGLProgram","extractUniformsFromWebGLProgram","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1={},this.$3=null,this.$4=[],this.$5={},this.$6={},this.$2=a}var b=a.prototype;b.addShader=function(a,b,d){if(this.$3){c("recoverableViolation")("Cannot add a shader, the program has already been compiled","webgl");return this}var e=a;if(d){d=d.map(function(a){return"#define "+a+"\n"}).join("");if(a.startsWith("#version")){var f=a.indexOf("\n")+1;e=a.substr(0,f)+d+a.substr(f)}else e=d+a}this.$4.push({code:e,type:b});return this};b.compile=function(){if(this.$3){c("recoverableViolation")("Cannot compile, the program has already been compiled","webgl");return this}var a=this.$2;if(a.isContextLost()){c("recoverableViolation")("Failed to create shader program, WebGL context lost","webgl");return this}var b=this.$4.map(function(b){var d=b.code;b=b.type;b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS)){d=a.getShaderInfoLog(b)||"";a.deleteShader(b);c("recoverableViolation")("Failed to compile shader: "+d,"webgl")}return b}),d=a.createProgram();for(b of b)a.attachShader(d,b);a.linkProgram(d);if(!a.getProgramParameter(d,a.LINK_STATUS)){b=a.getProgramInfoLog(d)||"";a.deleteProgram(d);c("recoverableViolation")("Failed to link program: "+b,"webgl");return this}this.$3=d;this.$6=c("extractUniformsFromWebGLProgram")(a,d);this.$1=c("extractAttributesFromWebGLProgram")(a,d);return this};b.use=function(){if(!this.$3){c("recoverableViolation")("Cannot use Program before it has been compiled","webgl");return}this.$2.useProgram(this.$3)};b.getUniform=function(a){var b=this.$6[a];if(!b){c("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}return b};b.getUniforms=function(){return this.$6};b.getAttribute=function(a){var b=this.$1[a];if(!b){c("recoverableViolation")("Program does not have an attribute called "+a,"webgl");return null}return b};b.setUniformDefaults=function(a){for(var b in a)this.$5[b]=a[b];return this};b.getDefaultValueForUniform=function(a){if(!(a in this.$6)){c("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}if(a in this.$5){var b=this.$5[a];return Array.isArray(b)?b.slice():b}return c("defaultValueForWebGLUniform")(this.$6[a].type)};return a}();g["default"]=a}),98);
__d("createWebGLEquirectSphericalPhotoProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f,g){"use strict";var h="\nattribute vec3 a_position;\nattribute vec2 a_textureCoord;\n\nvarying highp vec2 v_textureCoord;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * vec4(a_position, 1);\n    v_textureCoord = a_textureCoord;\n}\n",i="\nvarying highp vec2 v_textureCoord;\n\nuniform sampler2D u_sampler;\n\nvoid main() {\n    gl_FragColor = texture2D(u_sampler, v_textureCoord);\n}\n";function a(a){var b=new(c("CometWebGLProgram"))(a);return b.addShader(h,a.VERTEX_SHADER).addShader(i,a.FRAGMENT_SHADER).compile()}g["default"]=a}),98);
__d("CometWebGLCylindricalMesh",["CometWebGLMesh","CometWebGLTexture","createWebGLEquirectSphericalPhotoProgram"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){var e=this;this.hasLoadedTextureSource=function(){return e.$4};this.$5=b;this.$6=d;b=30;d=30;this.$1=a;this.$2=new(c("CometWebGLMesh"))(a,c("createWebGLEquirectSphericalPhotoProgram")(a));this.$4=!1;this.$3=new(c("CometWebGLTexture"))(a);this.$2.addAttribute("a_position");this.$2.addAttribute("a_textureCoord");a=this.$7(b,d);this.$2.bufferData(a);a=this.$8(b,d);this.$2.bufferIndex(a)}var b=a.prototype;b.draw=function(a,b){this.$2.setUniform("viewMatrix",a),this.$2.setUniform("projectionMatrix",b),this.$2.setUniform("u_sampler",this.$3),this.$2.program.use(),this.$2.draw()};b.$7=function(a,b){var c=2,d=[],e=this.$6/Math.PI,f=this.$5/(2*Math.PI),g=(1-e)/2,h=(1-f)/2;for(var i=0;i<=a;i++){var j=g+i/a*e;j=j*Math.PI;for(var k=0;k<=b;k++){var l=h+k/b*f;l=l*2*Math.PI;var m=Math.sin(l);l=Math.cos(l);m=-m;var n=this.$9(j);l=l;d.push(c*m);d.push(c*n);d.push(c*l);m=k/b;n=i/a;d.push(m);d.push(n)}}return d};b.$8=function(a,b){var c=[];for(var d=0;d<a;d++)for(var e=0;e<b;e++){var f=d*(b+1)+e,g=f+b+1;c.push(f);c.push(g);c.push(f+1);c.push(g);c.push(g+1);c.push(f+1)}return c};b.loadTexture=function(a){this.$3.setSource(a),this.$4=!0};b.$9=function(a){return a<Math.PI/2?Math.tan(Math.PI/2-a):-Math.tan(a-Math.PI/2)};return a}();g["default"]=a}),98);
__d("Comet360PhotoCylindricalRenderer",["CometWebGLCylindricalMesh","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d,e,f,g){var h=this;this.$1=a;this.$2=b;this.$3=d;this.$5=e;this.$6=f;this.$7=g;this.$4=new(c("CometWebGLCylindricalMesh"))(a,this.$6,this.$7);c("promiseDone")(this.$2.fetchTextureImage().then(function(a){h.$4.loadTexture(a),h.$5(function(){h.draw()})}))}var d=a.prototype;d.initialize=function(){return new(h||(h=b("Promise")))(function(a,b){a()})};d.draw=function(){if(!this.$4.hasLoadedTextureSource)return;var a=this.$1;a.clear(a.COLOR_BUFFER_BIT);this.$4.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())};d.drawWithMatrices=function(a,b){if(!this.$4.hasLoadedTextureSource)return;this.$4.draw(a,b)};return a}();g["default"]=a}),98);
__d("CometWebGLSphericalMesh",["CometWebGLMesh","CometWebGLTexture","createWebGLEquirectSphericalPhotoProgram"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.hasLoadedTextureSource=function(){return b.$4};var d=30,e=30;this.$1=a;this.$2=new(c("CometWebGLMesh"))(a,c("createWebGLEquirectSphericalPhotoProgram")(a));this.$4=!1;this.$3=new(c("CometWebGLTexture"))(a);this.$2.addAttribute("a_position");this.$2.addAttribute("a_textureCoord");a=this.$5(d,e);this.$2.bufferData(a);a=this.$6(d,e);this.$2.bufferIndex(a)}var b=a.prototype;b.draw=function(a,b){this.$2.setUniform("viewMatrix",a),this.$2.setUniform("projectionMatrix",b),this.$2.setUniform("u_sampler",this.$3),this.$2.program.use(),this.$2.draw()};b.$5=function(a,b){var c=2,d=[],e=600,f=300,g=600,h=300,i=0/h,j=0/g;f=f/h;h=e/g;for(e=0;e<=a;e++){g=i+e/a*f;g=(.5-g)*Math.PI;var k=Math.sin(g);g=Math.cos(g);for(var l=0;l<=b;l++){var m=j+l/b*h;m=(m-.75)*2*Math.PI;var n=Math.sin(m);m=Math.cos(m);m=m*g;var o=k;n=n*g;d.push(c*m);d.push(c*o);d.push(c*n);m=l/b;o=e/a;d.push(m);d.push(o)}}return d};b.$6=function(a,b){var c=[];for(var d=0;d<a;d++)for(var e=0;e<b;e++){var f=d*(b+1)+e,g=f+b+1;c.push(f);c.push(g);c.push(f+1);c.push(g);c.push(g+1);c.push(f+1)}return c};b.loadTexture=function(a){this.$3.setSource(a),this.$4=!0};return a}();g["default"]=a}),98);
__d("Comet360PhotoSphericalRenderer",["CometWebGLSphericalMesh","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d,e){var f=this;this.$1=a;this.$2=b;this.$3=d;this.$5=e;this.$4=new(c("CometWebGLSphericalMesh"))(a);c("promiseDone")(this.$2.fetchTextureImage().then(function(a){f.$4.loadTexture(a),f.$5(function(){f.draw()})}))}var d=a.prototype;d.initialize=function(){return new(h||(h=b("Promise")))(function(a,b){a()})};d.draw=function(){if(!this.$4.hasLoadedTextureSource)return;var a=this.$1;a.clear(a.COLOR_BUFFER_BIT);this.$4.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())};d.drawWithMatrices=function(a,b){if(!this.$4.hasLoadedTextureSource)return;this.$4.draw(a,b)};return a}();g["default"]=a}),98);
__d("Comet360PhotoTiledCubemapDataProvider_tileUriQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24518751694380026"}),null);
__d("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql",["Comet360PhotoTiledCubemapDataProvider_tileUriQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"tileInfoList"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"tile_info_list",variableName:"tileInfoList"}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"PhotoEncoding",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("Comet360PhotoTiledCubemapDataProvider_tileUriQuery_facebookRelayOperation"),metadata:{},name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("Comet360PhotoTiledCubemapTile",[],(function(a,b,c,d,e,f){"use strict";function a(a){return"Level: "+a.level+"|Face: "+a.face+"|Col: "+a.col+"|Row: "+a.row}f.hashCubemapTileInfo=a}),66);
__d("Comet360PhotoTiledCubemapDataProvider",["Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql","Comet360PhotoTiledCubemapTile","CometRelay","Promise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h!==void 0?h:h=b("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql");a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$5=c,this.$3=new Map(),this.$4=new Map(),this.$6=d,this.$7=e}var e=a.prototype;e.maxTileLevel=function(){return this.$5};e.horizontalFov=function(){return this.$6};e.verticalFov=function(){return this.$7};e.isFetchingTileImage=function(a){a=(j||(j=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a);return this.$4.has(a)};e.fetchTileImage=function(a){var e=this,f=(j||(j=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a);if(this.isFetchingTileImage(a)){var g=this.$4.get(f);if(g==null)throw c("unrecoverableViolation")("Data Provider is fetching tile image but promise is null","immersive_media");return g}if(this.$3.has(f))return new(i||(i=b("Promise")))(function(a,b){a(e.$3.get(f))});g=this.$8(a).then(function(b){return e.$9(a,b).then(function(a){e.$4["delete"](f);return a})});this.$4.set(f,g);return g};e.$9=function(a,c){var e=this,f=(j||(j=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a);return new(i||(i=b("Promise")))(function(a,b){var d=new Image();d.crossOrigin="anonymous";d.onload=function(){d.onload=null,a(d)};c==null?a(null):d.src=c}).then(function(a){e.$3.set(f,a);return a})};e.$8=function(a){return d("CometRelay").fetchQuery(this.$1,k,{id:this.$2,tileInfoList:[a]}).toPromise().then(function(a){a=a==null?void 0:(a=a.node)==null?void 0:a.tiles;return a==null||a[0]==null?null:a[0].uri})};return a}();g["default"]=a}),98);
__d("Comet360PhotoTiledCubemapTextureCache",["Comet360PhotoTiledCubemapTile","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a,this.$2=new Map()}var b=a.prototype;b.hasTexture=function(a){a=(h||(h=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a);return this.$2.has(a)};b.getBestTileTexture=function(a){var b=a.level,e=a.col,f=a.row;while(b>=0){var g={col:e,face:a.face,level:b,row:f},i=(h||(h=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(g);i=this.$2.get(i);if(i!=null)return[i,g];b-=1;e=Math.floor(e/2);f=Math.floor(f/2)}throw c("unrecoverableViolation")('Unable to find a best texture for: "'+(h||(h=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a)+'".',"immersive_media")};b.loadTexture=function(a,b){var e=null;b&&(e=new(c("CometWebGLTexture"))(this.$1,{generateMipmaps:!0}),e.setSource(b,!0));this.$2.set((h||(h=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(a),e)};return a}();g["default"]=a}),98);
__d("Matrices",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){a=Math.tan(a/2)*c;var e=-a,f=a*b;b=e*b;return[2*c/(f-b),0,0,0,0,2*c/(a-e),0,0,(f+b)/(f-b),(a+e)/(a-e),(c+d)/(c-d),-1,0,0,c*d*2/(c-d),0]}function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]}function c(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=2/Math.sqrt(b*b+c*c+d*d+a*a);return[1-e*(c*c+d*d),e*(b*c+d*a),e*(b*d-c*a),0,e*(b*c-d*a),1-e*(b*b+d*d),e*(c*d+b*a),0,e*(b*d+c*a),e*(c*d-b*a),1-e*(b*b+c*c),0,0,0,0,1]}function d(a){return h(a[0],a[1],a[2])}function h(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function e(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6],h=a[8]*a[13]-a[9]*a[12],i=a[8]*a[14]-a[10]*a[12],j=a[8]*a[15]-a[11]*a[12],k=a[9]*a[14]-a[10]*a[13],l=a[9]*a[15]-a[11]*a[13],m=a[10]*a[15]-a[11]*a[14],n=b*m-c*l+d*k+e*j-f*i+g*h,o=(a[5]*m-a[6]*l+a[7]*k)/n,p=(a[2]*l-a[1]*m-a[3]*k)/n,q=(a[13]*g-a[14]*f+a[15]*e)/n,r=(a[10]*f-a[9]*g-a[11]*e)/n,s=(a[6]*j-a[4]*m-a[7]*i)/n;m=(a[0]*m-a[2]*j+a[3]*i)/n;var t=(a[14]*d-a[12]*g-a[15]*c)/n;g=(a[8]*g-a[10]*d+a[11]*c)/n;var u=(a[4]*l-a[5]*j+a[7]*h)/n;j=(a[1]*j-a[0]*l-a[3]*h)/n;l=(a[12]*f-a[13]*d+a[15]*b)/n;d=(a[9]*d-a[8]*f-a[11]*b)/n;f=(a[5]*i-a[4]*k-a[6]*h)/n;k=(a[0]*k-a[1]*i+a[2]*h)/n;i=(a[13]*c-a[12]*e-a[14]*b)/n;h=(a[8]*e-a[9]*c+a[10]*b)/n;return[o,p,q,r,s,m,t,g,u,j,l,d,f,k,i,h]}function i(a,b){var c=g();c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14];c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];return c}function j(a,b){var c=[0,0,0,0];c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];return c}function k(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}a={createIdentityMat4:g,createPerspectiveProjectionMatrix:a,createRotationMatrixFromQuaternion:c,createScalingMatrix:b,createTranslationMatrix:h,createTranslationMatrixFromVec:d,invertMat4:e,multiplyMat4:i,multiplyVec4:j,transposeMatrix:k};f["default"]=a}),66);
__d("Quaternions",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[0,0,0,1],d=Math.sin(b/2);c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=Math.cos(b/2);return c}function b(a,b,c){var d=[0,0,0,1],e=Math.cos(a/2),f=Math.cos(c/2),g=Math.cos(b/2);a=Math.sin(a/2);c=Math.sin(c/2);b=Math.sin(b/2);d[0]=a*f*g-e*c*b;d[1]=e*f*b+a*c*g;d[2]=e*c*g-a*e*b;d[3]=e*f*g+a*c*b;return d}function c(a){var b=Math.atan2(2*(a[3]*a[0]+a[1]*a[2]),1-2*(a[0]*a[0]+a[1]*a[1])),c=Math.asin(2*(a[3]*a[1]-a[2]*a[0]));a=Math.atan2(2*(a[3]*a[2]+a[0]*a[1]),1-2*(a[1]*a[1]+a[2]*a[2]));return[b,c,a]}function d(a,b){var c=[0,0,0,1];c[0]=b[3]*a[0]+b[0]*a[3]+b[1]*a[2]-b[2]*a[1];c[1]=b[3]*a[1]-b[0]*a[2]+b[1]*a[3]+b[2]*a[0];c[2]=b[3]*a[2]+b[0]*a[1]-b[1]*a[0]+b[2]*a[3];c[3]=b[3]*a[3]-b[0]*a[0]-b[1]*a[1]-b[2]*a[2];return c}e={multiply:d,quaternionFromAxisAngle:a,quaternionFromTaitBryan:b,taitBryanFromQuaternion:c};f["default"]=e}),66);
__d("createWebGLTiledCubemapTileProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f,g){"use strict";var h="\nattribute vec3 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texcoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform vec2 u_uvOffset;\nuniform float u_uvScale;\nuniform vec2 u_uvOffsetBackground;\nuniform float u_uvScaleBackground;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\nvarying vec3 v_color;\n\nvoid main() {\n  v_texcoord = a_texcoord * u_uvScale + u_uvOffset;\n  v_backgroundTexcoord = a_texcoord * u_uvScaleBackground + u_uvOffsetBackground;\n  v_worldPosition = modelMatrix * vec4(a_position, 1.0);\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n}\n",i="\nprecision mediump float;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\n\nuniform sampler2D u_tileTexture;\nuniform sampler2D u_backgroundTexture;\nuniform vec2 u_horizontalAngleBounds;\nuniform vec2 u_verticalAngleBounds;\n\nvoid main() {\n  // Use the world position of the fragment to compute where it lies\n  // in terms of horizontal and vertical angles.\n  float hAngle = atan(v_worldPosition.x, -1.0 * v_worldPosition.z);\n  float vAngle = atan(v_worldPosition.y, sqrt(v_worldPosition.x * v_worldPosition.x + v_worldPosition.z * v_worldPosition.z));\n\n  // If this fragment is out of bounds, use the color of the background texture\n  // which is the Level 0 face texture. Otherwise, use the color of the texture\n  // given to be displayed.\n  if (hAngle > u_horizontalAngleBounds.x &&\n      hAngle < u_horizontalAngleBounds.y &&\n      vAngle > u_verticalAngleBounds.x &&\n      vAngle < u_verticalAngleBounds.y) {\n    gl_FragColor = texture2D(u_tileTexture, v_texcoord);\n  } else {\n    gl_FragColor = texture2D(u_backgroundTexture, v_backgroundTexcoord);\n  }\n}\n";function a(a){var b=new(c("CometWebGLProgram"))(a);return b.addShader(h,a.VERTEX_SHADER).addShader(i,a.FRAGMENT_SHADER).compile()}g["default"]=a}),98);
__d("CometWebGLCubemapTileMesh",["CometWebGLMesh","Matrices","Quaternions","createWebGLTiledCubemapTileProgram","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={MINUS_X:0,MINUS_Y:5,MINUS_Z:1,PLUS_X:2,PLUS_Y:4,PLUS_Z:3},i=300;a=function(){function a(a,b,d,e,f){this.$1=a;this.$3=b;this.$5=d;this.$2=new(c("CometWebGLMesh"))(a,c("createWebGLTiledCubemapTileProgram")(a),{interleaved:!1});this.$2.addAttribute("a_position",{offset:0});this.$2.addAttribute("a_texcoord",{offset:48});b=[1,1,-.5,0,1,-.5,0,0,-.5,1,0,-.5,1,1,0,1,0,0,1,0];this.$2.bufferData(b);this.$2.bufferIndex([0,1,2,2,3,0]);d=1/Math.pow(2,this.$3.level);b=(a=c("Matrices")).createScalingMatrix(d,d,1);d=this.$6(this.$3.face);var g=this.$7(this.$3.level,this.$3.col,this.$3.row),h=a.createScalingMatrix(i,i,i);a=a.multiplyMat4(a.multiplyMat4(a.multiplyMat4(b,g),d),h);this.$4=a;this.$2.setUniform("modelMatrix",this.$4);this.$2.setUniform("u_horizontalAngleBounds",[].concat(e));this.$2.setUniform("u_verticalAngleBounds",[].concat(f))}var b=a.prototype;b.draw=function(a,b){this.$2.setUniform("viewMatrix",a);this.$2.setUniform("projectionMatrix",b);a=this.$5.getBestTileTexture(this.$3);b=a[0];a=a[1];a=this.$8(a);var c=a[0];a=a[1];this.$2.setUniform("u_tileTexture",b);this.$2.setUniform("u_uvScale",a);this.$2.setUniform("u_uvOffset",[].concat(c));b={col:0,face:this.$3.face,level:0,row:0};a=this.$5.getBestTileTexture(b);c=a[0];a[1];a=this.$8(b);b=a[0];a=a[1];this.$2.setUniform("u_backgroundTexture",c);this.$2.setUniform("u_uvScaleBackground",a);this.$2.setUniform("u_uvOffsetBackground",[].concat(b));this.$2.program.use();this.$2.draw()};b.$6=function(a){switch(a){case h.PLUS_X:return c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(0,-Math.PI/2,0));case h.MINUS_X:return c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(0,Math.PI/2,0));case h.PLUS_Y:return c("Matrices").multiplyMat4(c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(Math.PI/2,0,0)));case h.MINUS_Y:return c("Matrices").multiplyMat4(c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(-Math.PI/2,0,0)));case h.PLUS_Z:return c("Matrices").createRotationMatrixFromQuaternion(c("Quaternions").quaternionFromTaitBryan(0,Math.PI,0));case h.MINUS_Z:return c("Matrices").createIdentityMat4();default:throw c("unrecoverableViolation")("Unexpected cube face index: "+a,"immersive_media")}};b.$8=function(a){a=this.$3.level-a.level;if(a===0)return[[0,0],1];a=1/Math.pow(2,a);var b=1*a,c=[b*this.$3.col,b*this.$3.row];c[1]=1-b-c[1];return[c,a]};b.$7=function(a,b,d){a=1/Math.pow(2,a);var e=.5;b=[b*a,d*a];b[1]=1-a-b[1];d=-e;return c("Matrices").createTranslationMatrix(b[0]+d,b[1]+d,0)};return a}();g["default"]=a}),98);
__d("Comet360PhotoTiledCubemapRenderer",["Comet360PhotoTiledCubemapTextureCache","Comet360PhotoTiledCubemapTile","CometWebGLCubemapTileMesh","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b,d,e){var f=this;this.$1=a;this.$3=d;this.$2=b;this.$4=e;this.$7=new(c("Comet360PhotoTiledCubemapTextureCache"))(this.$1);this.$6=new Map();this.$8=!1;a=this.$2.horizontalFov();d=this.$2.verticalFov();this.$9=[-a/2,a/2];this.$10=[-d/2,d/2];this.$5=function(){f.$4(function(){f.draw()})}}var e=a.prototype;e.initialize=function(){return this.$11()};e.draw=function(){this.$1.clear(this.$1.COLOR_BUFFER_BIT),this.$12(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())};e.drawWithMatrices=function(a,b){this.$12(a,b)};e.$12=function(a,b){if(!this.$8)return;var e=this.$1;e.enable(e.CULL_FACE);e.cullFace(e.BACK);e=this.$13();var f=[];for(e of e){var g=(i||(i=d("Comet360PhotoTiledCubemapTile"))).hashCubemapTileInfo(e),h=this.$6.get(g);h==null&&(h=new(c("CometWebGLCubemapTileMesh"))(this.$1,e,this.$7,this.$9,this.$10),this.$6.set(g,h));f.push(h)}for(g of f)g.draw(a,b)};e.$13=function(){var a=[],b=1,c=!1;while(!c&&b<=this.$2.maxTileLevel()){var d=this.$14(b);for(var e of d)this.$7.hasTexture(e)||(c=!0,this.$15(e));if(c)return a.length===0?this.$14(0):a;else a=[].concat(d),b++}return a};e.$14=function(a){var b=Math.pow(2,a),c=[];for(var d=0;d<6;d++)for(var e=0;e<b;e++)for(var f=0;f<b;f++)c.push({col:f,face:d,level:a,row:e});return c};e.$15=function(a){var b=this;this.$2.isFetchingTileImage(a)||c("promiseDone")(this.$2.fetchTileImage(a).then(function(c){b.$7.loadTexture(a,c),b.$5!=null&&b.$5()}))};e.$11=function(){var a=this;if(this.$8)return new(h||(h=b("Promise")))(function(a,b){a()});var c=[],d=function(b){var d={col:0,face:b,level:0,row:0};c.push(a.$2.fetchTileImage(d).then(function(b){a.$7.loadTexture(d,b)}))};for(var e=0;e<6;e++)d(e);return(h||(h=b("Promise"))).all(c).then(function(){a.$8=!0})};return a}();g["default"]=a}),98);
__d("Comet360SphericalMediaHeadingIndicatorOverlay.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useLayoutEffect,l=b.useRef,m={invisible:{opacity:"xg01cxk",$$css:!0},root:{height:"x1s1d1n7",end:"x27edjs",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transitionDuration:"xippbsu",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x1n7h9c3",$$css:!0},rootTop:{height:"x1s1d1n7",end:"x8cgc45",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",top:"xyd03xr",transform:"x4v1no5",transitionDuration:"xippbsu",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x1n7h9c3",$$css:!0}},n={arcRadius:6.3,arcStroke:5.3,backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundRadius:17.5,centerRadius:2,elementColor:"rgba(255, 255, 255, 0.85)",height:35,innerRadius:12,innerStroke:1,partialPanoElementColor:"rgba(255, 255, 255, 0.6)",rimRadius:16.8,rimStroke:1.4,triangle:[2,2.5,5.2],width:35};function o(){return Math.max(window.devicePixelRatio||1,1)}function p(){var a=o();return{height:n.height*a,width:n.width*a}}function q(){var a=p();return{x:a.width/2,y:a.height/2}}var r=function(a,b,c,d){a.beginPath(),a.arc(b.x,b.y,c*o(),0,2*Math.PI,!1),a.fillStyle=d,a.lineWidth=0,a.fill()},s=function(a,b,c,d,e,f,g){var h=o();a.beginPath();a.arc(b.x,b.y,c*h,d,e,!1);a.lineWidth=f*h;a.strokeStyle=g;a.stroke()};function t(a){var b=q(),c=o(),d=n.triangle[0]*c,e=n.triangle[1]*c;c=n.triangle[2]*c;a.translate(b.x,b.y);a.beginPath();a.moveTo(0,d-b.y);a.lineTo(-e,c-b.y);a.lineTo(e,c-b.y);a.fillStyle=n.elementColor;a.fill()}function u(a,b,c,d){var e=q();r(a,e,n.backgroundRadius,n.backgroundColor);r(a,e,n.centerRadius,n.elementColor);s(a,e,n.innerRadius,0,2*Math.PI,n.innerStroke,n.partialPanoElementColor);b=b/2;s(a,e,n.innerRadius,c+d-b,c+d+b,n.innerStroke,n.elementColor)}function v(a,b,c,d,e){c=c-d;d=b/2;s(a,q(),n.arcRadius,e+c-d,e+c+d,n.arcStroke,n.elementColor)}function a(a){var b=a.currentHeading,d=a.headingIndicationLocationTop;d=d===void 0?!1:d;var e=a.initialHeading,f=e===void 0?0:e;e=a.isVisible;e=e===void 0?!0:e;var g=a.maximumHorizontalFov,i=a.poiHeading,n=i===void 0?1.5*Math.PI:i,o=a.viewerHorizontalFov,q=l(null);k(function(){var a=q.current;if(a==null)return;var c=p();(a.width!==c.width||a.height!==c.height)&&(a.width=c.width,a.height=c.height);a=a.getContext("2d");if(!a)return;a.save();a.clearRect(0,0,c.width,c.height);u(a,g,n,f);v(a,o,n,f,b);t(a);a.restore()},[b,f,g,n,o]);i=d?m.rootTop:m.root;return j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(i,!e&&m.invisible),{children:j.jsx("canvas",babelHelpers["extends"]({className:"x5yr21d xh8yej3"},{ref:q}))}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedStoryImmersiveMediaMouseOverlay.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(24),c=a.descriptionFbt,e=a.isActive;a=a.showClick;var f;b[0]!==e?(f={0:{className:"xn0vg7t xtzzx4i x1hc1fzr x47corl x10l6tqk xjebx4m"},1:{className:"xn0vg7t xtzzx4i x47corl x10l6tqk xjebx4m xg01cxk"}}[!!!e<<0],b[0]=e,b[1]=f):f=b[1];var g,h,j,k;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x1c74tu6 xa4qsjk xszg11z xy58vm5 x10w6t97 xtzzx4i x1kpxzk0 x10l6tqk x1xp8n7a"},g={className:"x1c74tu6 xa4qsjk xsjn2wy"},h={className:"x1c74tu6 xa4qsjk xw8ys2m"},j=i.jsx("div",{className:"x1h6ucep x13zp6kq x1mcfq15 xrosliz x1wb7cse xc9qbxq x10l6tqk xwdmxg7 x17z2i9w"}),k={className:"x12myldv x1udsgas x5pf9jr xo71vjh xegnrdp x6ikm8r x10wlt62 x10l6tqk x809xjq x1xp8n7a"},b[2]=e,b[3]=g,b[4]=h,b[5]=j,b[6]=k):(e=b[2],g=b[3],h=b[4],j=b[5],k=b[6]);var l;b[7]!==a?(l={0:{className:"x14hiurz x1hagigm x10l6tqk x1xc55vz"},1:{className:"x14hiurz x1hagigm x10l6tqk x1xc55vz x1c74tu6 xa4qsjk x1176mnt"}}[!!a<<0],b[7]=a,b[8]=l):l=b[8];b[9]!==l?(a=i.jsx("div",babelHelpers["extends"]({},l)),b[9]=l,b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(l=i.jsx("div",{className:"x14hiurz x1hagigm x10l6tqk x1gu1b8v xci0xqf"}),b[11]=l):l=b[11];b[12]!==a?(k=i.jsxs("div",babelHelpers["extends"]({},k,{children:[a,l]})),b[12]=a,b[13]=k):k=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(l=i.jsx("div",{className:"x14hiurz x168nmei x13lgxp2 xrc8dwe xxxhv2y xi0exxh x10l6tqk x1xp8n7a"}),b[14]=l):l=b[14];b[15]!==k?(a=i.jsx("div",babelHelpers["extends"]({},e,{children:i.jsx("div",babelHelpers["extends"]({},g,{children:i.jsxs("div",babelHelpers["extends"]({},h,{children:[j,k,l]}))}))})),b[15]=k,b[16]=a):a=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x14ctfv x1pg5gke x117nqv4 xr9ek0c xfs2ol5 xjpr12u x12mruv9 x2b8uid xesdh2l xuxw1ft"},b[17]=e):e=b[17];b[18]!==c?(g=i.jsx("div",babelHelpers["extends"]({},e,{children:c})),b[18]=c,b[19]=g):g=b[19];b[20]!==f||b[21]!==a||b[22]!==g?(h=i.jsxs("div",babelHelpers["extends"]({},f,{children:[a,g]})),b[20]=f,b[21]=a,b[22]=g,b[23]=h):h=b[23];return h}g["default"]=a}),98);
__d("LazyMat4",["Matrices"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!0,this.$1=c("Matrices").createIdentityMat4(),this.$3=a}var b=a.prototype;b.value=function(){this.$2&&(this.$1=this.$3(),this.$2=!1);return[].concat(this.$1)};b.markDirty=function(){this.$2=!0};return a}();g["default"]=a}),98);
__d("CometWebGLCamera",["LazyMat4","Matrices","Quaternions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){var f=this;this.$1=a;this.$2=b;this.$3=d;this.$4=e;this.$6=[0,0,0,1];this.$5=[0,0,0];this.$7=new(c("LazyMat4"))(function(){var a,b=(a=c("Matrices")).createRotationMatrixFromQuaternion(f.$6),d=a.createTranslationMatrixFromVec(f.$5);b=a.multiplyMat4(b,d);return a.invertMat4(b)});this.$8=new(c("LazyMat4"))(function(){return c("Matrices").createPerspectiveProjectionMatrix(f.$1,f.$2,f.$3,f.$4)});this.$9=new(c("LazyMat4"))(function(){var a=c("Matrices").multiplyMat4(f.$7.value(),f.$8.value());return c("Matrices").invertMat4(a)})}var b=a.prototype;b.getViewMatrix=function(){return this.$7.value()};b.getProjectionMatrix=function(){return this.$8.value()};b.getInvertedViewProjectionMatrix=function(){return this.$9.value()};b.getRotation=function(){return[].concat(this.$6)};b.setRotation=function(a){this.$6=[].concat(a);this.$7.markDirty();this.$9.markDirty();return this};b.getPosition=function(){return[].concat(this.$5)};b.setPosition=function(a){this.$5=a;this.$7.markDirty();this.$9.markDirty();return this};b.getAspectRatio=function(){return this.$2};b.setAspectRatio=function(a){this.$2=a;this.$8.markDirty();this.$9.markDirty();return this};b.getHorizontalFov=function(){return a.computeHorizontalFov(this.$2,this.$1)};b.getVerticalFov=function(){return this.$1};b.setVerticalFov=function(a){this.$1=a;this.$8.markDirty();this.$9.markDirty();return this};b.translate=function(a,b,d,e){e===void 0&&(e=!0);a=[a,b,d,0];if(!e){b=c("Matrices").createRotationMatrixFromQuaternion(this.$6);a=c("Matrices").multiplyVec4(a,b)}this.$5=[this.$5[0]+a[0],this.$5[1]+a[1],this.$5[2]+a[2]];this.$7.markDirty();this.$9.markDirty();return this};b.rotate=function(a){this.$6=c("Quaternions").multiply(this.$6,a);this.$7.markDirty();this.$9.markDirty();return this};a.computeHorizontalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)*a)};a.computeVerticalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)/a)};return a}();g["default"]=a}),98);
__d("PanEventListenerWrapper.react",["VideoPlayerPointerDrag","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useRef,k=5;function a(a){var b=d("react-compiler-runtime").c(14),c=a.onPan,e=a.onPanEnd,f=a.onPanStart,g=a.onPress,h=j(0),l=j(null),m=j(null),n;b[0]!==f?(n=function(a){h.current=0,l.current=a.clientX,m.current=a.clientY,f!=null&&f()},b[0]=f,b[1]=n):n=b[1];n=n;var o;b[2]!==c?(o=function(a){if(l.current!=null&&m.current!=null){var b=a.clientX-l.current,d=a.clientY-m.current,e=Math.sqrt(b*b+d*d);h.current=h.current+e;c!=null&&c(b,d)}l.current=a.clientX;m.current=a.clientY},b[2]=c,b[3]=o):o=b[3];o=o;var p;b[4]!==e||b[5]!==g?(p=function(){h.current<k&&(g!=null&&g()),e!=null&&e()},b[4]=e,b[5]=g,b[6]=p):p=b[6];p=p;var q;b[7]!==p||b[8]!==o||b[9]!==n?(q={onDragCancel:p,onDragEnd:p,onDragMove:o,onDragStart:n},b[7]=p,b[8]=o,b[9]=n,b[10]=q):q=b[10];p=d("VideoPlayerPointerDrag").usePointerDrag(q);o=p.rootProps;b[11]!==a.children||b[12]!==o?(n=i.jsx("div",babelHelpers["extends"]({},o,{children:a.children})),b[11]=a.children,b[12]=o,b[13]=n):n=b[13];return n}g["default"]=a}),98);
__d("useFrameTiming",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef;function a(){var a=d("react-compiler-runtime").c(6),b=j(null),c=j(null),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a){var b=c.current;if(b==null)return;b(a)},a[0]=e):e=a[0];var f=e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a){var d=b.current;d!=null&&window.cancelAnimationFrame(d);c.current=a;b.current=window.requestAnimationFrame(f)},a[1]=e):e=a[1];e=e;var g;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){var a=b.current;if(a==null)return;window.cancelAnimationFrame(a)},a[2]=g):g=a[2];g=g;var h,k;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){return function(){var a=b.current;if(a==null)return;window.cancelAnimationFrame(a)}},k=[],a[3]=h,a[4]=k):(h=a[3],k=a[4]);i(h,k);a[5]===Symbol["for"]("react.memo_cache_sentinel")?(h=[e,g],a[5]=h):h=a[5];return h}g["default"]=a}),98);
__d("SphericalPhotoPanEventListenerWrapper.react",["PanEventListenerWrapper.react","react","useFrameTiming"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useRef,l=.95,m=.001,n=1;function a(a){var b=a.children,d=a.disableMomentum,e=a.onPan,f=a.onPress,g=k(0),h=k(0),o=k(0),p=k(0);a=c("useFrameTiming")();var q=a[0],r=a[1],s=j(function(){g.current*=l,h.current*=l,e(g.current,h.current),(Math.abs(g.current)>m||Math.abs(h.current)>m)&&q(s)},[g,h,e,q]),t=j(function(a,b){r(),o.current=a,p.current=b,e(a,b)},[r,e,o,p]);a=j(function(){t(0,0)},[t]);var u=j(function(){var a=function(a){return Math.abs(a)>n?a:0};g.current=a(o.current||0);h.current=a(p.current||0);d!==!0&&q(s)},[d,q,s]),v=j(function(){f!=null&&(r(),f())},[r,f]);return i.jsx(c("PanEventListenerWrapper.react"),{onPan:t,onPanEnd:u,onPanStart:a,onPress:v,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ViewInVRButton.react",["fbt","CometPressable.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={button:{backgroundColor:"x18l40ae",color:"x14ctfv",end:"x27edjs",start:"xal3pk5",left:null,right:null,paddingTop:"x889kno",paddingBottom:"x1a8lsjc",position:"x10l6tqk",top:"xyd03xr",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(3);a=a.onPress;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx("div",babelHelpers["extends"]({className:"x1iyjqo2 x6prxxf x2b8uid"},{children:h._(/*BTDS*/"View in VR")})),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx(c("CometPressable.react"),{expanding:!0,onPress:a,xstyle:k.button,children:e}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),226);
__d("beginXRSession",["promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,d=a.draw,e=a.gl,f=a.onEnter,g=a.onExit;b=(b=a.sessionType)!=null?b:"inline";var h=(a=a.refSpaceType)!=null?a:"local",i=null,j=null;c("promiseDone")(navigator.xr.requestSession(b).then(function(a){i=a;f!=null&&f();function b(){i=null,g!=null&&g()}a.addEventListener("end",b);function c(){i!=null&&i.end(),b()}a.addEventListener("select",c);a.addEventListener("squeeze",c);a.updateRenderState({baseLayer:new window.XRWebGLLayer(a,e,{stencil:!0})});return a.requestReferenceSpace(h)}).then(function(a){i!=null&&(j=a,i.requestAnimationFrame(k))}));function k(a,b){if(i==null||j==null)return;a=b.session;a.requestAnimationFrame(k);b=b.getViewerPose(j);if(b==null)return;a=a.renderState.baseLayer;e.bindFramebuffer(e.FRAMEBUFFER,a.framebuffer);d(b,a)}return function(){i!=null&&i.end()}}g["default"]=a}),98);
__d("XR360PhotoViewer.react",["CometRouteParams","ViewInVRButton.react","beginXRSession","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useRef;function a(a){var b=a.gl;a=a.renderer;var e=d("CometRouteParams").useRouteParams(),f=e.vrnav,g=l(null);g.current=a;var h=j(function(a,c){if(b==null)return;b.clearColor(0,0,.5,1);b.clear(b.COLOR_BUFFER_BIT);var d=g.current;if(d==null)return;for(a of a.views){var e=c.getViewport(a);b.viewport(e.x,e.y,e.width,e.height);d.drawWithMatrices(a.transform.inverse.matrix,a.projectionMatrix)}},[g,b]),m=j(function(){b!=null&&c("beginXRSession")({draw:h,gl:b,sessionType:"immersive-vr"})},[h,b]);k(function(){if(f===!0){var a;(a=window.navigator.xr)==null?void 0:a.addEventListener("sessiongranted",m)}return function(){var a;return(a=window.navigator.xr)==null?void 0:a.removeEventListener("sessiongranted",m)}},[f,m]);if(b==null)return null;return a==null?null:i.jsx(c("ViewInVRButton.react"),{onPress:m})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XRViewerGating.react",["Promise","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useState,m="xr"in((f=window.navigator)!=null?f:{})?null:!1,n=null;function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e=l(m),f=e[0],g=e[1],h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){if(m===!1)return;var a;a=!0;n===null&&(n=window.navigator.xr.isSessionSupported("immersive-vr").then(o));c("promiseDone")(n.then(function(b){a&&g(b)}));return function(){a=!1}},h=[g],b[0]=e,b[1]=h):(e=b[0],h=b[1]);k(e,h);if(f===!0)return a;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx("div",{}),b[2]=e):e=b[2];return e}function o(a){m=a;return(h||(h=b("Promise"))).resolve(a)}g["default"]=a}),98);
__d("XR360PhotoViewerEntry.react",["XR360PhotoViewer.react","XRViewerGating.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("XRViewerGating.react"),{children:i.jsx(c("XR360PhotoViewer.react"),babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("useGLContext",["WebPixelRatio","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useState;function a(a,b,e){var f=k(null),g=f[0],h=f[1],l=(f=e==null?void 0:e.expand)!=null?f:!1,m=(f=e==null?void 0:e.stencil)!=null?f:!1;j(function(){var a=document.createElement("canvas"),b=a.getContext("webgl",{stencil:m});if(b==null){c("recoverableViolation")("Unable to create WebGL context","webgl");return function(){}}h(b);return function(){try{b.getExtension("WEBGL_lose_context").loseContext()}catch(a){c("recoverableViolation")("Failed to clean up WebGL context","webgl",{error:a})}}},[]);j(function(){if(g==null)return;var c=g.canvas,e=d("WebPixelRatio").get(),f=a*e;e=b*e;c.width=f;c.height=e;g.viewport(0,0,f,e);c.style.width=l?"100%":a+"px"},[g,a,b,l]);e=i(function(a){if(g==null)return;var b=g.canvas,c=b.parentNode;c!=null&&c.removeChild(b);a!=null&&a.appendChild(b)},[g]);return[g,e]}g["default"]=a}),98);
__d("Comet360PhotoViewer.react",["fbt","Comet360PhotoCylindricalRenderer","Comet360PhotoSphericalRenderer","Comet360PhotoTiledCubemapRenderer","Comet360PhotoTypes","Comet360SphericalMediaHeadingIndicatorOverlay.react","CometFeedStoryImmersiveMediaMouseOverlay.react","CometWebGLCamera","Quaternions","SphericalPhotoPanEventListenerWrapper.react","XR360PhotoViewerEntry.react","clearTimeout","getCometPrefersReducedMotion","mergeRefs","promiseDone","react","recoverableViolation","setTimeout","useFrameTiming","useGLContext","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState,p=.1,q=500,aa=1.527163,ba=c("getCometPrefersReducedMotion")()?.25:1;function a(a){var b=a.disableMomentum,e=a.fallbackElement,f=a.headingIndicationLocationTop,g=a.height,i=a.isCoverPhoto,r=a.onCameraViewChange,s=a.onLoad,ca=a.onPress,t=a.photoEncoding,u=a.width,v=u/g,w=m(function(){if(t.startingView.verticalFov!=null){if(i===!0&&t.verticalFov>=Math.PI){var a=t.startingView.verticalFov;a=Math.tan(a/2);a=a*1.5;return Math.atan(a)*2}return t.startingView.verticalFov}return t.startingView.horizontalFov!=null?c("CometWebGLCamera").computeVerticalFov(v,t.startingView.horizontalFov):aa},[t.startingView.verticalFov,t.startingView.horizontalFov,t.verticalFov,i,v]),x=m(function(){var a;return(a=t.startingView.horizontalFov)!=null?a:c("CometWebGLCamera").computeHorizontalFov(v,w)},[t.startingView.horizontalFov,v,w]),y=n(2*Math.PI-t.startingView.heading);y.current>Math.PI&&(y.current-=2*Math.PI);var z=n(t.startingView.pitch),A=n(y.current),B=m(function(){var a=-Math.PI/2,b=0,c=0,d=Math.PI/2;t.verticalFov<Math.PI&&(d=t.verticalFov/2-w/2,a=-t.verticalFov/2+w/2);t.horizontalFov<Math.PI*2&&(b=t.horizontalFov/2-x/2,c=-t.horizontalFov/2+x/2);return[b,c,d,a]},[t.verticalFov,t.horizontalFov,w,x]),C=B[0],D=B[1],E=B[2],F=B[3];B=o(A.current);var da=B[0],ea=B[1];B=o(!0);var G=B[0],fa=B[1];B=o(!1);var H=B[0],I=B[1],J=n(null);B=c("useGLContext")(u,g,{expand:!0});var K=B[0],L=B[1],M=n([0,0]),N=n(0);B=c("useFrameTiming")();var O=B[0],P=m(function(){return new(c("CometWebGLCamera"))(w,v,p,q)},[w,v]),Q=m(function(){if(K==null)return null;switch(t.projectionType){case d("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap:var a=t.tiledCubemapDataProvider;if(a==null){c("recoverableViolation")("Data provider for tiled cubemap renderer was not set","immersive_media");return null}return new(c("Comet360PhotoTiledCubemapRenderer"))(K,a,P,O);case d("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical:a=t.sphericalDataProvider;if(a==null){c("recoverableViolation")("Data provider for cylindrical renderer was not set","immersive_media");return null}return new(c("Comet360PhotoCylindricalRenderer"))(K,a,P,O,t.horizontalFov,t.verticalFov);case d("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular:a=t.sphericalDataProvider;if(a==null){c("recoverableViolation")("Data provider for spherical renderer was not set","immersive_media");return null}return new(c("Comet360PhotoSphericalRenderer"))(K,a,P,O)}},[K,t.projectionType,t.tiledCubemapDataProvider,t.sphericalDataProvider,t.horizontalFov,t.verticalFov,P,O]),R=k(function(){if(Q==null)return;Q.draw()},[Q]),S=function(){c("clearTimeout")(J.current),J.current=c("setTimeout")(function(){I(!0)},3e3)};B=function(){H&&I(!1),S()};var T=c("useThrottled")(B,100),U=c("useVisibilityObserver")({onVisible:function(){S()}});B=m(function(){return c("mergeRefs")(L,U)},[L,U]);l(function(){return function(){c("clearTimeout")(J.current)}},[]);var V=k(function(){if(K==null)return;var a=K.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;M.current=[b,c]},[M,K]),W=m(function(){return[u/2/Math.tan(x/2),g/2/Math.tan(w/2)]},[g,x,w,u]),X=W[0],Y=W[1],Z=k(function(a,b){if(a===0&&b===0)return;y.current+=Math.atan(a/X);z.current+=Math.atan(b/Y);C!==0&&y.current%Math.PI>C&&(y.current=C);D!==0&&y.current%Math.PI<D&&(y.current=D);z.current>E&&(z.current=E);z.current<F&&(z.current=F);a=c("Quaternions").quaternionFromTaitBryan(z.current,y.current,0);b=A.current-(y.current-A.current);ea(b);r&&r(b,z.current,w);P.setRotation(a);O(function(){R()})},[F,P,R,C,r,D,X,Y,O,E,w]);W=k(function(a,b){T(),Z(a,b)},[Z,T]);var $=k(function(){var a;if(K==null)return;V();var b=window.innerHeight,c=K.canvas.clientHeight;b=b+c;a=M.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;a=c-N.current;N.current=c;if(c<0||c>1)return;Z(-a*X*ba,0)},[M,K,V,Z,X]);l(function(){document.addEventListener("scroll",$);var a=!0;if(Q==null)return;c("promiseDone")(Q.initialize().then(function(){if(!a)return;var b=c("Quaternions").quaternionFromTaitBryan(z.current,y.current,0);P.setRotation(b);O(function(){R()});fa(!1);s&&s()}));return function(){a=!1,document.removeEventListener("scroll",$)}},[P,Q,R,s,$,O]);b=j.jsxs(c("SphericalPhotoPanEventListenerWrapper.react"),{disableMomentum:b,onPan:W,onPress:ca,children:[j.jsx("div",{ref:B,style:{display:G?"none":"block",lineHeight:0}}),G?e:null,j.jsx(c("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:h._(/*BTDS*/"Click and drag to look around"),isActive:H,showClick:!0}),j.jsx(c("Comet360SphericalMediaHeadingIndicatorOverlay.react"),{currentHeading:da,headingIndicationLocationTop:f,initialHeading:A.current,isVisible:!G,maximumHorizontalFov:a.photoEncoding.horizontalFov,viewerHorizontalFov:x})]});return c("XR360PhotoViewerEntry.react")!=null?j.jsxs(j.Fragment,{children:[b,j.jsx(c("XR360PhotoViewerEntry.react"),{gl:K,renderer:Q})]}):b}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("CometRemote360PhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote360PhotoViewer_photo",selections:[{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_horizontal_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("CometRemote360PhotoViewer.react",["Comet360GyroOverlay.react","Comet360PhotoTiledCubemapDataProvider","Comet360PhotoTypes","Comet360PhotoViewer.react","CometPhotoViewerContainerContext","CometRelay","CometRemote360PhotoViewer_photo.graphql","clearTimeout","react","recoverableViolation","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useRef,o=e.useState,p=1024;function q(a){return a/180*Math.PI}function a(a){var e,f,g,i,r,s,t,u,v=a.fallback,w=a.headingIndicationLocationTop,x=a.isCoverPhoto,y=a.onPress;a=a.photo;var z=o(!1),A=z[0],B=z[1];z=k(function(){B(!0)},[B]);var C=o(null),D=C[0];C=C[1];var E=l(c("CometPhotoViewerContainerContext")),F=k(function(){if(x===!0)return{height:p,width:p*2};if(E!=null&&E.current!=null){var a=E.current.getBoundingClientRect();return{height:a.height,width:a.width}}return{height:p,width:p}},[E,x]),G=o(!1),H=G[0],I=G[1],J=n(null);m(function(){J.current=c("setTimeout")(function(){I(!0)},2e3);return function(){J.current!=null&&c("clearTimeout")(J.current)}});G=!H||!A;H=d("CometRelay").useRelayEnvironment();A=d("CometRelay").useFragment(h!==void 0?h:h=b("CometRemote360PhotoViewer_photo.graphql"),a);A=(a=A==null?void 0:A.photo_encodings)!=null?a:[];a=A.find(function(a){return(a==null?void 0:a.projection_type)==="tiled_cubemap"});if(a==null){c("recoverableViolation")("360 photo does not have tile_cubemap encoding","comet_feed");return v}A=(A=a.max_tile_level)!=null?A:0;e=(e=a.id)!=null?e:0;f=(f=(f=a.spherical_metadata)==null?void 0:f.initial_view_heading_degrees)!=null?f:0;g=(g=(g=a.spherical_metadata)==null?void 0:g.initial_view_pitch_degrees)!=null?g:0;i=(i=(i=a.spherical_metadata)==null?void 0:i.initial_vertical_fov_degrees)!=null?i:0;r=(r=(r=a.spherical_metadata)==null?void 0:r.initial_horizontal_fov_degrees)!=null?r:0;s=(s=(s=a.spherical_metadata)==null?void 0:s.cropped_area_image_width_pixels)!=null?s:0;t=(t=(t=a.spherical_metadata)==null?void 0:t.cropped_area_image_height_pixels)!=null?t:0;u=(u=(u=a.spherical_metadata)==null?void 0:u.full_pano_width_pixels)!=null?u:0;a=(a=(a=a.spherical_metadata)==null?void 0:a.full_pano_height_pixels)!=null?a:0;var K=s/t;s=s/u*Math.PI*2;u=t/a*Math.PI;if(D==null){C(new(c("Comet360PhotoTiledCubemapDataProvider"))(H,e.toString(),A,s,u));return v}t={aspectRatio:K,horizontalFov:s,projectionType:d("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap,startingView:{heading:q(f),horizontalFov:r?q(r):null,pitch:q(g),verticalFov:i?q(i):null},tiledCubemapDataProvider:D,verticalFov:u};a=w;return j.jsxs("div",babelHelpers["extends"]({className:"x1n2onr6"},{children:[j.jsx(c("Comet360PhotoViewer.react"),{fallbackElement:v,headingIndicationLocationTop:a,height:F().height,isCoverPhoto:x,onLoad:z,onPress:y,photoEncoding:t,width:F().width}),j.jsx("div",babelHelpers["extends"]({className:"x1ey2m1c xds687c x17qophe x47corl x10l6tqk x13vifvy"},{children:j.jsx(c("Comet360GyroOverlay.react"),{isVisible:G})}))]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometRemote360PhotoViewerRenderer_renderer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote360PhotoViewerRenderer_renderer",selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometRemote360PhotoViewer_photo"}],storageKey:null}],type:"XFBCometImmersive360PhotoRenderer",abstractKey:null};e.exports=a}),null);
__d("CometRemote360PhotoViewerRenderer.react",["CometRelay","CometRemote360PhotoViewer.react","CometRemote360PhotoViewerRenderer_renderer.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(4),f=a.fallback,g=a.isCoverPhoto;a=a.renderer;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometRemote360PhotoViewerRenderer_renderer.graphql"),a);a=a==null?void 0:a.photo;if(a==null)return f;var i;e[0]!==f||e[1]!==g||e[2]!==a?(i=j.jsx(c("CometRemote360PhotoViewer.react"),{fallback:f,isCoverPhoto:g,photo:a}),e[0]=f,e[1]=g,e[2]=a,e[3]=i):i=e[3];return i}g["default"]=a}),98);
__d("CometRemote360PhotoViewerRenderer_renderer$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{kind:"SplitOperation",metadata:{},name:"CometRemote360PhotoViewerRenderer_renderer$normalization",selections:[{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_horizontal_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},a],storageKey:null},a],storageKey:null}]}}();e.exports=a}),null);